---
import AirDatepicker from "../components/AirDatepicker.astro";
import MobileMenu from "../components/MobileMenu.astro";
import PanelToggle from "../components/PanelToggle.astro";
import SettingsModal from "../components/SettingsModal.astro";
import StatusDetails from "../components/StatusDetails.astro";
import StatusLegend from "../components/StatusLegend.astro";
import SummaryBar from "../components/SummaryBar.astro";
import Layout from "../layouts/Layout.astro";

// Page metadata
const title = "RTO Calculator - Plan Your Time Off";
const description =
	"Plan your vacation for the next 365 days while ensuring compliance with RTO policies";
---

<Layout title={title} description={description}>
	<header class="hero is-small is-primary">
		<div class="hero-body">
			<div class="container">
				<h1 class="title is-4">RTO Compliance Tracker</h1>
				<p class="subtitle is-6">
					Plan your time off while staying compliant with office attendance policies
				</p>
			</div>
		</div>
	</header>

	<!-- Summary Bar with Quick Actions -->
	<div class="container">
		<SummaryBar />
	</div>

	<!-- Desktop: Two-column layout -->
	<div class="container is-hidden-mobile">
		<div class="columns is-desktop">
			<div class="column is-three-fifths">
				<!-- Calendar Section -->
				<section class="section py-4" id="calendar-container">
					<div class="box">
						<AirDatepicker />
						<div class="mt-4">
							<StatusLegend />
						</div>
					</div>
				</section>
			</div>

			<div class="column is-two-fifths">
				<!-- Status Details -->
				<section class="section py-4">
					<StatusDetails />
				</section>
			</div>
		</div>
	</div>

	<!-- Mobile: Collapsible Panels -->
	<div class="container is-hidden-tablet is-hidden-desktop">
		<PanelToggle title="ðŸ“Š Summary" open={true}>
			<StatusDetails />
		</PanelToggle>

		<PanelToggle title="ðŸ“… Calendar" open={false}>
			<div class="box" id="calendar-container-mobile">
				<AirDatepicker />
				<div class="mt-4">
					<StatusLegend />
				</div>
			</div>
		</PanelToggle>
	</div>

	<footer class="footer mt-6">
		<div class="content has-text-centered">
			<p>RTO Calculator - Plan your time off while staying compliant</p>
			<p class="is-size-7">
				<small>Select a mode from the palette below, then click dates to mark them</small>
			</p>
		</div>
	</footer>

	<MobileMenu />
	<SettingsModal />
</Layout>

<style>
	/* Custom styles for the Bulma redesign */
	.hero.is-small .hero-body {
		padding: 1.5rem 1rem;
	}

	/* Ensure footer stays at bottom */
	.footer {
		background-color: #fafafa;
		padding: 2rem 1.5rem;
	}

	/* Mobile-specific adjustments */
	@media (max-width: 768px) {
		.hero-body {
			padding: 1rem;
		}

		.section.py-4 {
			padding-top: 1rem;
			padding-bottom: 1rem;
		}

		.footer {
			padding: 1.5rem 1rem;
		}
	}
</style>

<script>
	import { initializeDateStore } from "../lib/dateStore";
	initializeDateStore();
</script>
